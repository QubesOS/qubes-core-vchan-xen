# `libvchan` implementation for Windows/Xen.

## Building locally on a single Windows dev machine

To build locally, all QWT component sources should be stored in parallel directories, like shown below (without the `qubes-` prefix).

```
+---artifacts (build output, generated by the build process)
+---core-agent-windows
+---core-qubesdb
+---core-vchan-xen
+---gui-agent-windows
+---gui-common
+---installer-windows-tools
+---vmm-xen-windows-pvdrivers
\---windows-utils
```

Executables are test-signed, build output is copied to the `.artifacts` directory inside the component and linked to the global `artifacts` directory mentioned above. Run `clean.cmd` to remove all files produced by the build process.

### Prerequisites

- Microsoft EWDK iso mounted as a drive.
- `QUBES_BUILDER` environment variable set to the location of `qubes-builderv2` repository.
- Internet connection.
- `powershell-yaml` PowerShell package installed (run `powershell -command Install-Package powershell-yaml` as admin)
  (TODO: provide offline installer for this).

### Visual Studio build

Run `vs.cmd` to open the project in Visual Studio with pre-set environment for development/building.

### Command-line noninteractive build

Run `build.cmd [Release|Debug]`. Release configuration is built if no option is provided.
